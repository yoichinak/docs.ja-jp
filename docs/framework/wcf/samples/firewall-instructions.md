---
title: ファイアウォール手順
ms.date: 03/30/2017
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
ms.openlocfilehash: 2c07d17ebb6bbefa78d12bb128e354112311891a
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/27/2019
ms.locfileid: "70044948"
---
# <a name="firewall-instructions"></a>ファイアウォール手順
Windows Communication Foundation (WCF) サンプルを機能させるには、ファイアウォールで複数のポートまたはプログラムを有効にする必要があります。 サンプルの多くは、通信する際に 8000 ～ 8003 の範囲のポートと 9000 のポートを使用します。 既定ではファイアウォールが有効なので、こうしたポートにはアクセスできません。 サンプル用にファイアウォールを有効にするには、要件とセキュリティ環境に応じて次のいずれかの手順を完了する必要があります。  
  
- オプション 1:実行中にサンプルを対話的に有効にします。 ファイアウォールの構成をあらかじめ変更することなく、サンプルのビルドおよび実行の開始に進みます。 サンプルを実行すると、 **[Windows セキュリティ警告]** ダイアログボックスが表示されます。 対象のプログラムを、ブロック解除の一覧に対話形式で追加できます。 この手順では、この後サンプルを再起動する必要があります。  
  
- オプション 2:サンプルプログラムを事前に有効にします。 **Windows ファイアウォールのコントロールパネル**アプレットを起動し、実行する予定のサンプルプログラムを有効にします。 実行可能ファイルが存在するように、プログラムを最初にビルドする必要があります。 手順の詳細については、後述を参照してください。  
  
- オプション 3:ポート範囲を事前に有効にします。 開始、 **Windows ファイアウォール** **コントロール パネルの**  アプレットと有効にするポート 80、443、8000 ~ 8003、9000、サンプルで使用されます。 手順の詳細については、後述を参照してください。 このオプションは他の手順よりも安全性が低くなります。サンプルだけでなく、任意のプログラムでこれらのポートを使用できるようになるからです。  
  
 どの手順を使用するか判断に迷う場合は、最初のオプションを選択してください。 他のベンダのファイアウォールを実行している場合も、同様の変更が必要になる場合があります。  
  
> [!IMPORTANT]
> ファイアウォールの構成を変更すると、セキュリティに影響します。 変更内容は記録し、サンプルの使用が終わったらそれらの変更点を削除することをお勧めします。  
  
### <a name="to-enable-samples-programs-in-advance"></a>サンプル プログラムをあらかじめ有効にしておくには  
  
1. このサンプルをビルドします。  
  
2. **[スタート]** 、 **[実行]** の`firewall.cpl`順にクリックし、「」と入力します。 これにより、[ **Windows ファイアウォール] コントロールパネル**アプレットが開きます。  
  
    > [!NOTE]
    > Windows ファイアウォールを介して通信する機能が必要なサンプルを実行するには、ファイアウォール設定を変更するための権限が必要です。 一部のファイウォール設定を変更できず、コンピューターがドメインに接続される場合は、システム管理者がグループ ポリシーを使用してファイアウォール設定を管理している可能性があります。  
  
3. Windows ファイアウォールを介したプログラムを許可するには、次のいずれかの手順を実行します。  
  
    - Windows 7 または Windows Server 2008 r2 で、[ **Windows ファイアウォールを介したプログラムまたは機能を許可**する] をクリックします。 をクリックして**設定を変更する**、許可**別のプログラムしています**.  
  
    - また[!INCLUDE[wv](../../../../includes/wv-md.md)] は[!INCLUDE[lserver](../../../../includes/lserver-md.md)]で、 **[Windows ファイアウォールによるプログラムの許可]** をクリックします。  
  
4. **[例外]** タブで、 **[プログラムの追加]** をクリックします。  
  
5. **参照**ボタンをクリックし、実行するサンプルの実行可能ファイルを選択します。  
  
6. 実行する予定のすべてのサンプルの実行可能ファイルを追加するまで、手順4と5を繰り返します。  
  
7. [ **OK]** をクリックして、ファイアウォールアプレットを閉じます。  
  
### <a name="to-enable-a-port-range-in-advance"></a>ポート範囲をあらかじめ有効にしておくには  
  
1. **[スタート]** 、 **[実行]** の`firewall.cpl`順にクリックし、「」と入力します。 これにより、[ **Windows ファイアウォール] コントロールパネル**アプレットが開きます。  
  
2. Windows 7 または Windows Server 2008 R2 の場合は、次の手順を実行します。  
  
    1. Windows ファイアウォール ウィンドウの左側の列にある **詳細設定** をクリックします。  
  
    2. 左側の列の **[受信の規則]** をクリックします。  
  
    3. 右側の列で **[新しいルール]** をクリックします。  
  
    4. **[ポート]** を選択し、 **[次へ]** をクリックします。  
  
    5. **[TCP]** を`8000, 8001, 8002, 8003, 9000, 80, 443`選択し、 **[特定のローカルポート]** フィールドに「」と入力します。  
  
    6. **[次へ]** をクリックします。  
  
    7. **[接続を許可する]** を選択し、 **[次へ]** をクリックします。  
  
    8. [**ドメイン**と**プライベート**] を選択し、 **[次へ]** をクリックします。  
  
    9. このルール`WCF-WF 4.0 Samples`に名前を指定し、 **[完了]** をクリックします。  
  
    10. **[送信の規則]** をクリックし、手順 c ~ h を繰り返します。  
  
3. [!INCLUDE[wv](../../../../includes/wv-md.md)] または [!INCLUDE[lserver](../../../../includes/lserver-md.md)] の場合は、次の手順を実行します。  
  
    1. [ **Windows ファイアウォールによるプログラムの許可] を**クリックします。  
  
    2. **[例外]** タブで、 **[ポートの追加]** をクリックします。  
  
    3. 名前を入力し、ポート番号として「8000」と入力して、 **[TCP]** オプションを選択します。  
  
    4. **[スコープの変更]** ボタンをクリックし、 **[マイネットワーク]** (サブネット) のみ オプションを選択して、 **[OK]** をクリックします。  
  
    5. 手順 b ～ d を繰り返して、ポート 8001、8002、8003、9000、80、および 443 を設定します。  
  
4. [ **OK]** をクリックして、ファイアウォールアプレットを閉じます。  
  
> [!NOTE]
> サンプルの実行が終わったら、ファイアウォールのすべての例外を削除します。 これを行うには、[ **Windows ファイアウォール] コントロールパネル**アプレットを開き、前の手順で追加したプログラムまたはポートエントリを削除します。
