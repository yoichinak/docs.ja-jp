---
title: サーバーレスアーキテクチャ-サーバーレスアプリ
description: Web apps、mobile、IoT など、サーバーレスアーキテクチャでサポートされているさまざまなアーキテクチャとアプリの探索。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 838dcd7b41df0d8297e1ae10f9c04a8d5b83b332
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2019
ms.locfileid: "72522409"
---
# <a name="serverless-architecture"></a>サーバーレス アーキテクチャ

[サーバーレス](https://azure.com/serverless)アーキテクチャを使用する方法は多数あります。 この章では、サーバーレスを統合する一般的なアーキテクチャの例を紹介します。 また、追加の課題を招く可能性がある懸念や、サーバーレスを実装する場合の追加の考慮事項についても説明します。 最後に、さまざまなサーバーレスのユースケースを示す、いくつかの設計例が用意されています。

サーバーレスホストでは、既存のコンテナーベースまたは PaaS レイヤーを使用して、サーバーレスインスタンスを管理することがよくあります。 たとえば、Azure Functions は[Azure App Service](https://docs.microsoft.com/azure/app-service/)に基づいています。 App Service は、インスタンスをスケールアウトし、Azure Functions コードを実行するランタイムを管理するために使用されます。 Windows ベースの関数の場合、ホストは PaaS として実行され、.NET ランタイムをスケールアウトします。 Linux ベースの機能の場合、ホストはコンテナーを活用します。

![Azure Functions アーキテクチャ](./media/azure-functions-architecture.png)

Web ジョブ Core は、関数の実行コンテキストを提供します。 言語ランタイムは、スクリプトを実行し、ライブラリを実行し、対象言語のフレームワークをホストします。 たとえば、node.js を使用して JavaScript 関数を実行し、.NET Framework を使用して関数C#を実行します。 言語とプラットフォームのオプションの詳細については、この章で後ほど説明します。

一部のプロジェクトでは、サーバーレスに "オールイン" アプローチを利用することでメリットが得られる場合があります。 マイクロサービスに大きく依存するアプリケーションでは、サーバーレステクノロジを使用してすべてのマイクロサービスを実装できます。 ほとんどのアプリはハイブリッドで、N 層設計に従っており、コンポーネントがモジュール型であり、独立してスケーラブルであるため、サーバーレスを使用します。 これらのシナリオを理解するために、このセクションではサーバーレスを使用する一般的なアーキテクチャの例について説明します。

## <a name="full-serverless-back-end"></a>完全なサーバーレスバックエンド

完全なサーバーレスバックエンドは、特に新規または "グリーンフィールド" アプリケーションを構築する場合に、いくつかの種類のシナリオに最適です。 Api の大きな領域があるアプリケーションでは、各 API をサーバーレス関数として実装することでメリットが得られます。 マイクロサービスアーキテクチャに基づくアプリは、完全なサーバーレスバックエンドとして実装できるもう1つの例です。 マイクロサービスは、さまざまなプロトコルを相互に通信します。 具体的なシナリオは次のとおりです。

- API ベースの SaaS 製品 (例: 財務支払いプロセッサ)。
- メッセージ駆動型アプリケーション (例: デバイス監視ソリューション)。
- サービス間の統合を重視するアプリ (例: 航空券予約アプリケーション)。
- 定期的に実行されるプロセス (例: タイマーベースのデータベースのクリーンアップ)。
- データ変換を重視しているアプリ (例: ファイルのアップロードによってトリガーされたインポート)。
- 変換と読み込み (ETL) プロセスを抽出します。

このドキュメントの後半で説明されている他の特定のユースケースがあります。

## <a name="monoliths-and-starving-the-beast"></a>モノリスと "ビーストの不足"

一般的な課題は、既存のモノリシックアプリケーションをクラウドに移行することです。 最も危険な方法は、仮想マシン全体に "リフトアンドシフト" することです。 多くの会社では、コードベースを最新化する機会として、移行を使用することにしています。 移行に関する実用的なアプローチは、"そのような作業が不足しています" と呼ばれます。 このシナリオでは、モノリスは "その他" として移行されます。 次に、選択したサービスが最新の状態になります。 場合によっては、サービスの署名が元のものと同じであることがあります。これは単に関数としてホストされます。 クライアントは、モノリスエンドポイントではなく、新しいサービスを使用するように更新されます。 一時的に、データベースレプリケーションなどの手順では、モノリスによってトランザクションがまだ処理されている場合でも、マイクロサービスが独自のストレージをホストできるようになります。 最終的には、すべてのクライアントが新しいサービスに移行されます。 すべての機能が置き換えられるまで、モノリスは "不足" (サービスは呼び出されなくなりました) です。 サーバーレスとプロキシの組み合わせによって、この移行の大部分が促進されます。

![サーバーレスモノリスの移行](./media/serverless-monolith-migration.png)

このアプローチの詳細については、「[サーバーレス Azure Functions を使用したアプリのクラウドへの移行](https://channel9.msdn.com/Events/Connect/2017/E102)」ビデオをご覧ください。

## <a name="web-apps"></a>Web アプリ

Web apps は、サーバーレスアプリケーションに適しています。 現在、web アプリには、サーバー主導型とクライアント主導型 (シングルページアプリケーションや SPA など) という2つの一般的なアプローチがあります。 サーバー主導の web アプリでは、通常、ミドルウェア層を使用して API 呼び出しを発行し、web UI をレンダリングします。 SPA アプリケーションは、ブラウザーから直接 REST API 呼び出しを行います。 どちらのシナリオでも、サーバーレスは、必要なビジネスロジックを提供することにより、ミドルウェアまたは REST API 要求に対応できます。 一般的なアーキテクチャは、軽量の静的な web サーバーを構築することです。 シングルページアプリケーション (SPA) は、HTML、CSS、JavaScript、その他のブラウザー資産を提供します。 次に、web アプリがマイクロサービスバックエンドに接続します。

## <a name="mobile-back-ends"></a>モバイルバックエンド

サーバーレスアプリのイベントドリブンパラダイムは、モバイルバックエンドとして理想的です。 モバイルデバイスによってイベントがトリガーされ、サーバーなしのコードが実行されて要求を処理します。 サーバーレスモデルを利用すると、開発者はアプリケーションの完全な更新をデプロイすることなく、ビジネスロジックを強化できます。 サーバーレスアプローチを使用すると、チームはエンドポイントを共有し、並行して作業することができます。

モバイル開発者は、サーバー側で専門家になることなくビジネスロジックを構築できます。 従来は、オンプレミスサービスに接続されているモバイルアプリです。 サービス層を構築するには、サーバープラットフォームとプログラミングパラダイムを理解する必要があります。 開発者は、サーバーをプロビジョニングして適切に構成するための操作を担当しました。 デプロイパイプラインの構築には、数日または数週間かかることがありました。 これらすべての課題はサーバーレスで対処されます。

サーバーレスによってサーバー側の依存関係が抽象化され、開発者はビジネスロジックに集中できます。 たとえば、JavaScript フレームワークを使用してアプリをビルドするモバイル開発者は、JavaScript でサーバーレス関数を構築できます。 サーバーレスホストは、オペレーティングシステム、コードをホストする node.js インスタンス、パッケージの依存関係などを管理します。 開発者には、単純な入力セットと、出力用の標準テンプレートが用意されています。 その後、ビジネスロジックの構築とテストに専念できます。 そのため、既存のスキルを使用して、新しいプラットフォームを習得したり、"サーバー側の開発者" になったりすることなく、モバイルアプリのバックエンドロジックを構築することができます。

![サーバーレスモバイルバックエンド](./media/serverless-mobile-backend.png)

ほとんどのクラウドプロバイダーは、モバイル開発ライフサイクル全体を簡略化するモバイルベースのサーバーレス製品を提供しています。 製品では、データを永続化するためのデータベースのプロビジョニングを自動化し、DevOps の問題を処理し、クラウドベースのビルドとテストフレームワークを提供し、開発者の優先言語を使用してビジネスプロセスをスクリプト化することができます。 モバイル中心のサーバーレスアプローチに従うと、プロセスが効率化されます。 サーバーレスでは、モバイルバックエンド用のサーバーのプロビジョニング、構成、および保守に大きなオーバーヘッドが生じます。

## <a name="internet-of-things-iot"></a>モノのインターネット (IoT)

IoT は、相互にネットワーク接続された物理オブジェクトを参照します。 "接続されたデバイス" または "スマートデバイス" と呼ばれることもあります。 自動車および自動販売機マシンからのすべてが接続され、在庫から温度や湿度などのセンサーデータに情報が送信される場合があります。 企業では、IoT は監視と自動化によってビジネスプロセスを改善します。 IoT データを使用して、大規模な倉庫の気候を制御したり、サプライチェーンを通じて在庫を追跡したりすることができます。 IoT は化学薬品を感知し、煙が検出されたときに消防署を呼び出すことができます。

多くの場合、デバイスと情報の膨大な量によって、メッセージをルーティングして処理するためのイベントドリブンアーキテクチャが決まります。 サーバーレスは、次のようないくつかの理由で理想的なソリューションです。

- デバイスとデータの量が増えるにつれて、スケールが有効になります。
- 新しいデバイスとセンサーをサポートするための新しいエンドポイントの追加に対応します。
- 独立したバージョン管理を容易にし、開発者がシステム全体を展開することなく、特定のデバイスのビジネスロジックを更新できるようにします。
- 回復性とダウンタイムの削減。

IoT のさやにより、 [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub)などの iot の懸念事項に焦点を当てた複数のサーバーレス製品が得られました。 サーバーレスでは、デバイスの登録、ポリシーの適用、追跡、さらに*はエッジの*デバイスへのコードの展開などのタスクを自動化します。 エッジとは、インターネットに接続されているがアクティブな部分ではなく、センサーやアクチュエータなどのデバイスを指します。

>[!div class="step-by-step"]
>[前へ](architecture-approaches.md)
>[次へ](serverless-architecture-considerations.md)
