---
title: 互換性
description: コードの変更が .NET の互換性に影響を与えるしくみについて説明します。
ms.date: 06/10/2019
ms.openlocfilehash: 1cf14b7ff4143367653bd1c305cc1dda6711f980
ms.sourcegitcommit: a2c8b19e813a52b91facbb5d7e3c062c7188b457
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "85415694"
---
# <a name="how-code-changes-can-affect-compatibility"></a>コード変更が互換性に影響を与えるしくみ

"*互換性*" とは、コードが最初に開発されたときのものとは異なる .NET 実装のバージョンで、コードがコンパイルまたは実行できることを指します。 [特定の変更](index.md)があると、6 つの異なる方法で互換性に影響する場合があります。

- [動作の変更](#behavioral-change)
- [バイナリの互換性](#binary-compatibility)
- [ソースの互換性](#source-compatibility)
- [デザイン時の互換性](#design-time-compatibility)
- [下位互換性](#backwards-compatibility)
- [上位互換性](#forward-compatibility) (.NET Core の目標ではありません)

## <a name="behavioral-change"></a>動作の変更

動作の変更とは、メンバーの動作の変更を指します。 この変更は、外部から参照可能 (たとえば、メソッドが別の例外をスローするなど) である場合があります。または、変更された実装 (たとえば、戻り値の計算方法の変更、メソッドの内部呼び出しの追加または削除、またはパフォーマンスの大幅な向上など) を指す場合があります。

動作の変更が、外部から参照可能、かつ型のパブリック コントラクトを変更するものである場合、バイナリの互換性に影響するため、簡単に評価できます。 実装の変更の評価はさらに困難です。変更の性質、および API の使用の頻度およびパターンによって、変更の影響は深刻なものから無害なものにまで及びます。

## <a name="binary-compatibility"></a>バイナリの互換性

バイナリの互換性とは、API のコンシューマーが、再コンパイルせずに新しいバージョンで API を使用できることです。 型へのメソッドの追加または新しいインターフェイス実装の追加などの変更は、バイナリの互換性には影響しません。 しかし、アセンブリによって公開されるインターフェイスと同じものにコンシューマーがアクセスできなくなるように、アセンブリのパブリック シグネチャが削除または変更されると、バイナリの互換性が影響を受けます。 このような種類の変更は、"*バイナリ非互換な変更*" と呼ばれます。

## <a name="source-compatibility"></a>ソースの互換性

ソースの互換性とは、API の既存のコンシューマーが、ソースを変更せずに新しいバージョンに再コンパイルできることを指します。 "*ソース非互換な変更*" は、コンシューマーが新しいバージョンの API が正しくビルドされるように、ソース コードを変更する必要がある場合に発生します。

## <a name="design-time-compatibility"></a>デザイン時の互換性

デザイン時の互換性とは、デザイン時のエクスペリエンスを Visual Studio の複数のバージョン間およびその他のデザイン時環境で維持できることを指します。 デザイン時の互換性には、デザイナーの動作または UI も含まれる場合がありますが、プロジェクトの互換性が最も重要です。 プロジェクトまたはソリューションは、そのデザイン時環境の新しいバージョンで開いて使用できる必要があります。

## <a name="backwards-compatibility"></a>下位互換性

下位互換性とは、API の既存のコンシューマーが、新しいバージョンに対して同じ動作で実行できることを指します。 動作の変更とバイナリの互換性の変更の両方が、下位互換性に影響します。 コンシューマーがその API の新しいバージョンで実行されるときに、実行できない、または動作が異なる場合、その API は "*下位非互換*" です。

開発者は新しいバージョンの API が下位互換であることを期待しているので、下位互換性に影響する変更は行わないことを推奨します。

## <a name="forward-compatibility"></a>上位互換性

上位互換性とは、API の既存のコンシューマーが、古いバージョンに対して同じ動作を示して実行できることを指します。 コンシューマーがその API の新しいバージョンで実行されるときに、実行できない、または動作が異なる場合、その API は "*上位非互換*" です。

上位互換を維持するということは、バージョン間でどのような変更や追加も実質的に行わないことを意味します。より新しいバージョンを対象とするコンシューマーが以前のバージョンで実行されるのを、これらの変更が阻止するためです。 開発者は、より新しい API に依存するコンシューマーが古い API では正しく動作しない場合があると想定しています。

上位互換性の維持が .NET Core の目標ではないのです。

## <a name="see-also"></a>関連項目

- [.NET Core の破壊的変更を評価する](index.md)
